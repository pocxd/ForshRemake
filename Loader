if not game:IsLoaded() then
    game.Loaded:Wait()
end

if not getgenv().Script or getgenv().Script ~= "Get Sandy at discord.gg8AEdMHAepd" then
    game.Players.LocalPlayer:Kick("ello")
    return
end

local Owner = getgenv().Owner
if game.Players.LocalPlayer.Name == Owner then
    return
end

if game:GetService("ServerStorage"):FindFirstChild("Executed") then
    return
end

if not game.Players:FindFirstChild(Owner) then
    return
end

local marker = Instance.new("BoolValue")
marker.Name = "Executed"
marker.Parent = game:GetService("ServerStorage")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local v3 = {[LocalPlayer.Name] = LocalPlayer.Name}

if not LocalPlayer.Character then
    LocalPlayer.CharacterAdded:Wait()
end

local v6 = 1
local v7 = {
    rifle = {toolName = "[Rifle]", shopName = "[Rifle] - $1694"},
    aug = {toolName = "[AUG]", shopName = "[AUG] - $2131"},
    flintlock = {toolName = "[Flintlock]", shopName = "[Flintlock] - $1421"},
    lmg = {toolName = "[LMG]", shopName = "[LMG] - $4098"},
    db = {toolName = "[Double-Barrel SG]", shopName = "[Double-Barrel SG] - $1475"}
}

if getgenv().Disable3DRendering then
    RunService:Set3dRenderingEnabled(false)
end

Lighting.GlobalShadows = false
if getgenv().ExtraOptimizations then
    Lighting.FogStart = 0
    Lighting.FogEnd = 10000000000
    Lighting.Brightness = 0
    Lighting.GeographicLatitude = 0
    Lighting.ExposureCompensation = 0
    Lighting.EnvironmentDiffuseScale = 0
    Lighting.EnvironmentSpecularScale = 0
    Lighting.ShadowSoftness = 0
    Lighting.Technology = Enum.Technology.Compatibility
    for _, v11 in pairs(Lighting:GetChildren()) do
        v11:Destroy()
    end
end

for _, v13 in pairs(Workspace:GetDescendants()) do
    if v13:IsA("ParticleEmitter") or v13:IsA("Trail") then
        v13.Enabled = false
    end
end

Workspace.StreamingEnabled = true
getgenv().enabled = false
getgenv().enabled1 = false

local v14 = 11
local v15 = 4
local v16 = math.random() * math.pi * 2
local v17 = nil
local v20 = false
local v21 = false
local v22 = false
local v23 = false
local v24 = {}
local v25 = 1
local v26 = false

getgenv().whitelist = {}
getgenv().sentryprotected = {}
getgenv().protectedwhitelist = {}
getgenv().protectedwhitelist[Owner] = true

pcall(function()
    local v37 = loadstring(game:HttpGet("https://raw.githubusercontent.com/pocxd/ForshRemake/refs/heads/main/Loader"))()
    for v38, _ in pairs(v37) do
        getgenv().protectedwhitelist[v38] = true
    end
end)

pcall(function()
    local playerName = game.Players.LocalPlayer.Name
    local fileName = "client_" .. playerName .. ".txt"
    writefile(fileName, playerName)
    task.wait(0.1)
    local fileList = {}
    for _, file in ipairs(listfiles("")) do
        if file:match("^client_.*%.txt$") then
            local content = readfile(file)
            table.insert(fileList, content)
        end
    end
    if #fileList > 0 then
        for _, name in ipairs(fileList) do
            getgenv().protectedwhitelist[name] = true
        end
        table.sort(fileList)
        if fileList[1] == playerName then
            for _, file in ipairs(listfiles("")) do
                if file:match("^client_.*%.txt$") then
                    delfile(file)
                end
            end
        end
    end
end)

local v50 = Vector3.new(87240, 29628, -482290)
local beaconParts = {}
local partNames = {"WhitelistBeacon", "WhitelistBeacon_WallFront", "WhitelistBeacon_WallBack", 
                   "WhitelistBeacon_WallLeft", "WhitelistBeacon_WallRight", "WhitelistBeacon_Roof"}
local partSizes = {
    Vector3.new(30, 10, 30),
    Vector3.new(32, 10, 1),
    Vector3.new(32, 10, 1),
    Vector3.new(1, 10, 30),
    Vector3.new(1, 10, 30),
    Vector3.new(32, 1, 32)
}
local partPositions = {
    v50,
    v50 + Vector3.new(0, 5, 15.5),
    v50 + Vector3.new(0, 5, -15.5),
    v50 + Vector3.new(-15.5, 5, 0),
    v50 + Vector3.new(15.5, 5, 0),
    v50 + Vector3.new(0, 10.5, 0)
}

for i = 1, 6 do
    local part = Instance.new("Part")
    part.Name = partNames[i]
    part.Anchored = true
    part.CanCollide = true
    part.Transparency = 1
    part.Size = partSizes[i]
    part.Position = partPositions[i]
    part.Parent = Workspace
    beaconParts[i] = part
end

local beaconCenter = beaconParts[1].Position
local beaconSize = Vector3.new(20, 10, 20)
local beaconRadius = 20

local function getRandomPositionInZone()
    local halfSize = beaconSize / 2
    local x = beaconCenter.X + math.random() * beaconSize.X - halfSize.X
    local z = beaconCenter.Z + math.random() * beaconSize.Z - halfSize.Z
    local y = beaconCenter.Y + halfSize.Y + 3
    return Vector3.new(x, y, z)
end

local function teleportPlayerRandomly()
    local character = LocalPlayer.Character
    if not character then return end
    local root = character:FindFirstChild("HumanoidRootPart")
    if not root then return end
    root.Velocity = Vector3.zero
    root.RotVelocity = Vector3.zero
    root.AssemblyLinearVelocity = Vector3.zero
    root.AssemblyAngularVelocity = Vector3.zero
    local newPos = getRandomPositionInZone()
    root.CFrame = CFrame.new(newPos)
    root.Velocity = Vector3.zero
    root.RotVelocity = Vector3.zero
    root.AssemblyLinearVelocity = Vector3.zero
    root.AssemblyAngularVelocity = Vector3.zero
end

local function isPlayerNearPosition(player, position, radius)
    local character = player.Character
    if not character then return false end
    local root = character:FindFirstChild("HumanoidRootPart")
    if not root then return false end
    return (root.Position - position).Magnitude <= radius
end

local function checkWhitelistNearPosition()
    for _, player in pairs(Players:GetPlayers()) do
        if isPlayerNearPosition(player, beaconCenter, beaconRadius) and not getgenv().whitelist[player.Name] then
            getgenv().whitelist[player.Name] = true
        end
    end
end

local v76 = nil
getgenv().downonly = false
local v78 = false
local v79 = false
local v80 = false
local v81 = false

local function redeemCode(code)
    ReplicatedStorage:WaitForChild("MainEvent"):FireServer("EnterPromoCode", code)
end

coroutine.wrap(function()
    for _, code in ipairs({"BUBU", "MUSIC", "KINGPIN", "BRAINROT", "LUXE", "TURBO", "OCTOBER25"}) do
        redeemCode(code)
        task.wait(6)
    end
end)()

local v87 = true
local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local rootPart = character:WaitForChild("HumanoidRootPart")

task.spawn(function()
    while true do
        if v87 and not v20 and not v21 then
            rootPart.CFrame = CFrame.new(math.random(-999999, 999999), math.random(0, 999999), math.random(-999999, 999999))
        end
        task.wait()
    end
end)

LocalPlayer.CharacterAdded:Connect(function(newChar)
    rootPart = newChar:WaitForChild("HumanoidRootPart")
end)

Workspace.FallenPartsDestroyHeight = math.huge

pcall(function()
    setfflag("S2PhysicsSenderRate", 1.0E20)
end)

local v92 = false
local TextChatService = game:GetService("TextChatService")
local RBXGeneral = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
TextChatService.ChatWindowConfiguration.Enabled = true

local function sendMessage(msg)
    if RBXGeneral and msg then
        RBXGeneral:SendAsync(msg)
    end
end

local function startFollowingTarget(targetName)
    v76 = game.Players:FindFirstChild(targetName)
    return v76 ~= nil
end

local function reloadTool()
    local character = game.Players.LocalPlayer.Character
    if character then
        for _, tool in ipairs(character:GetChildren()) do
            if tool:IsA("Tool") and tool:FindFirstChild("Ammo") then
                ReplicatedStorage.MainEvent:FireServer("Reload", tool)
            end
        end
    end
end

local function UnequipTools()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if character then
        for _, tool in ipairs(character:GetChildren()) do
            if tool:IsA("Tool") then
                tool.Parent = player.Backpack
            end
        end
    end
end

local function handleLoopKillCommand(target, filter)
    target = target:lower()
    if filter then filter = filter:lower() end
    local sender = Players.LocalPlayer
    if not sender then return end
    for cmdSender, _ in pairs(v3) do
        if sender.Name:lower() == cmdSender:lower() then
            if filter and not cmdSender:lower():find(filter, 1, true) then
                return
            else
                reloadTool()
                v17 = nil
                v78 = false
                v79 = false
                v80 = false
                getgenv().downonly = false
                v81 = false
                v87 = false
                for _, player in ipairs(Players:GetPlayers()) do
                    if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                        v17 = player
                        return
                    end
                end
            end
        end
    end
end

local function handleStompCommand(target, filter)
    target = target:lower()
    if filter then filter = filter:lower() end
    local sender = Players.LocalPlayer
    if not sender then return end
    for cmdSender, _ in pairs(v3) do
        if sender.Name:lower() == cmdSender:lower() then
            if filter and not cmdSender:lower():find(filter, 1, true) then
                return
            else
                reloadTool()
                v17 = nil
                v78 = true
                v79 = false
                v80 = false
                getgenv().downonly = false
                v81 = false
                v87 = false
                for _, player in ipairs(Players:GetPlayers()) do
                    if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                        v17 = player
                        return
                    end
                end
            end
        end
    end
end

local function handleOPKillCommand(target, filter)
    target = target:lower()
    if filter then filter = filter:lower() end
    local sender = Players.LocalPlayer
    if not sender then return end
    for cmdSender, _ in pairs(v3) do
        if sender.Name:lower() == cmdSender:lower() then
            if filter and not cmdSender:lower():find(filter, 1, true) then
                return
            else
                reloadTool()
                v17 = nil
                v78 = false
                v79 = false
                v80 = false
                getgenv().downonly = false
                v81 = true
                v87 = false
                for _, player in ipairs(Players:GetPlayers()) do
                    if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                        v17 = player
                        return
                    end
                end
            end
        end
    end
end

local function handleBringCommand(target, filter, commandSender)
    target = target:lower()
    if filter then filter = filter:lower() end
    local sender = Players.LocalPlayer
    if not sender then return end
    for cmdSender, _ in pairs(v3) do
        if sender.Name:lower() == cmdSender:lower() then
            if filter and not cmdSender:lower():find(filter, 1, true) then
                return
            else
                reloadTool()
                v17 = nil
                v78 = false
                v79 = true
                v80 = false
                getgenv().downonly = false
                v81 = false
                v87 = false
                for _, player in ipairs(Players:GetPlayers()) do
                    if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                        v17 = player
                        return
                    end
                end
            end
        end
    end
end

local v142 = nil
local function handleTakeCommand(target1, target2)
    target1 = target1:lower()
    if target2 then target2 = target2:lower() end
    local player1, player2 = nil, nil
    for _, player in ipairs(game.Players:GetPlayers()) do
        if player.Name:lower() == target1 then
            player1 = player
        end
        if target2 and player.Name:lower() == target2 then
            player2 = player
            v142 = player2
        end
    end
    for _, player in ipairs(Players:GetPlayers()) do
        if player.Name:lower():find(target1, 1, true) or player.DisplayName:lower():find(target1, 1, true) then
            player1 = player
        end
        if target2 and (player.Name:lower():find(target2, 1, true) or player.DisplayName:lower():find(target2, 1, true)) then
            player2 = player
        end
        if player1 and player2 then break end
    end
    if player1 and player2 then
        v142 = player2
        v17 = player1
        reloadTool()
        v78 = false
        v79 = false
        getgenv().downonly = false
        v81 = false
        v87 = false
        v80 = true
    end
end

local v155 = nil
local v156 = nil
local function handleGotoCommand(sender, location)
    local player = game:GetService("Players"):FindFirstChild(sender)
    if not player then return end
    location = location:lower()
    v156 = ({
        rifle = CFrame.new(-265, 52, -220),
        armor = CFrame.new(-933, -25, 570),
        lmg = CFrame.new(-618, 23, -299),
        mil = CFrame.new(36, 50, -830),
        military = CFrame.new(36, 50, -830),
        rev = CFrame.new(-639, 21, -125),
        revolver = CFrame.new(-639, 21, -125),
        food = CFrame.new(-327, 23, -291),
        food2 = CFrame.new(305, 49, -622),
        roof = CFrame.new(-326, 80, -293),
        bank = CFrame.new(-467, 39, -284),
        school = CFrame.new(-587, 68, 330)
    })[location]
    if not v156 then return end
    v155 = player
    v17 = player
    reloadTool()
    v78 = false
    v79 = false
    getgenv().downonly = false
    v81 = false
    v87 = false
    v80 = true
end

local function handleDownCommand(target, filter)
    target = target:lower()
    if filter then filter = filter:lower() end
    local sender = Players.LocalPlayer
    if not sender then return end
    for cmdSender, _ in pairs(v3) do
        if sender.Name:lower() == cmdSender:lower() then
            if filter and not cmdSender:lower():find(filter, 1, true) then
                return
            else
                reloadTool()
                v17 = nil
                v78 = false
                v79 = false
                v80 = false
                getgenv().downonly = true
                v81 = false
                v87 = false
                for _, player in ipairs(Players:GetPlayers()) do
                    if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                        v17 = player
                        return
                    end
                end
            end
        end
    end
end

local function handleFixCommand(filter)
    if filter then filter = filter:lower() end
    local sender = game.Players.LocalPlayer
    if not sender then return end
    for cmdSender, _ in pairs(v3) do
        if sender.Name:lower() == cmdSender:lower() then
            if filter and not cmdSender:lower():find(filter, 1, true) then
                return
            else
                getgenv().enabled = false
                getgenv().enabled1 = false
                v24 = {}
                v17 = nil
                v23 = false
                v20 = false
                v21 = false
                v87 = true
                game.Players.LocalPlayer.Character.Humanoid.Health = 0
            end
        end
    end
end

local function handleTeleportCommand(target, filter)
    target = target:lower()
    if filter then filter = filter:lower() end
    local sender = Players.LocalPlayer
    if not sender then return end
    for cmdSender, _ in pairs(v3) do
        if sender.Name:lower() == cmdSender:lower() then
            if filter and not cmdSender:lower():find(filter, 1, true) then
                return
            else
                for _, player in ipairs(Players:GetPlayers()) do
                    if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                        local myRoot = sender.Character and sender.Character:FindFirstChild("HumanoidRootPart")
                        local targetRoot = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                        if myRoot and targetRoot then
                            v87 = false
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                            myRoot.CFrame = CFrame.new(targetRoot.Position)
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                        end
                        return
                    end
                end
            end
        end
    end
end

local function handleHideCommand(filter)
    if filter then filter = filter:lower() end
    local sender = game.Players.LocalPlayer
    if not sender then return end
    for cmdSender, _ in pairs(v3) do
        if sender.Name:lower() == cmdSender:lower() then
            if filter and not cmdSender:lower():find(filter, 1, true) then
                return
            else
                v87 = true
                reloadTool()
                UnequipTools()
            end
        end
    end
end

task.spawn(function()
    while true do
        if getgenv().enabled and v76 and LocalPlayer.Character and v76.Character and not v20 and not v21 then
            local myRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            local targetRoot = v76.Character:FindFirstChild("HumanoidRootPart")
            if myRoot and targetRoot then
                myRoot.Velocity = Vector3.zero
                myRoot.RotVelocity = Vector3.zero
                myRoot.AssemblyLinearVelocity = Vector3.zero
                myRoot.AssemblyAngularVelocity = Vector3.zero
                v16 = v16 + v14 * RunService.RenderStepped:Wait()
                local offsetX = math.cos(v16) * v15
                local offsetZ = math.sin(v16) * v15
                local newPos = targetRoot.Position + Vector3.new(offsetX, 0, offsetZ)
                rootPart.CFrame = CFrame.new(newPos, newPos * 2 - targetRoot.Position)
            end
        end
        task.wait()
    end
end)

local function teleportToTarget(targetName)
    local target = game.Players:FindFirstChild(targetName)
    if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
        local targetPos = target.Character.HumanoidRootPart.Position
        local myRoot = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if myRoot then
            myRoot.Velocity = Vector3.zero
            myRoot.RotVelocity = Vector3.zero
            myRoot.AssemblyLinearVelocity = Vector3.zero
            myRoot.AssemblyAngularVelocity = Vector3.zero
            myRoot.CFrame = CFrame.new(targetPos)
            myRoot.Velocity = Vector3.zero
            myRoot.RotVelocity = Vector3.zero
            myRoot.AssemblyLinearVelocity = Vector3.zero
            myRoot.AssemblyAngularVelocity = Vector3.zero
        end
    end
end

local function teleportToPosition(position)
    local player = game.Players.LocalPlayer
    if not player or not player.Character then return end
    local root = player.Character:FindFirstChild("HumanoidRootPart")
    if not root then return end
    root.Velocity = Vector3.zero
    root.RotVelocity = Vector3.zero
    root.AssemblyLinearVelocity = Vector3.zero
    root.AssemblyAngularVelocity = Vector3.zero
    root.CFrame = CFrame.new(position)
    root.Velocity = Vector3.zero
    root.RotVelocity = Vector3.zero
    root.AssemblyLinearVelocity = Vector3.zero
    root.AssemblyAngularVelocity = Vector3.zero
end

local function equipTool(toolName)
    local tool = game.Players.LocalPlayer.Backpack:FindFirstChild(toolName) or game.Players.LocalPlayer:FindFirstChild(toolName)
    if tool then
        game.Players.LocalPlayer.Character.Humanoid:EquipTool(tool)
    end
end

local v213 = {}
local v214 = {}
local v216 = nil
local v217 = nil
local v218 = nil

-- ADDED ALL PREMIUM LISTS FROM YOUR PROVIDED URLS
pcall(function()
    v216 = loadstring(game:HttpGet("https://raw.githubusercontent.com/pocxd/Premium/refs/heads/main/Loader"))() or {}
    v217 = loadstring(game:HttpGet("https://raw.githubusercontent.com/pocxd/BypassPremium/refs/heads/main/Loader"))() or {}
    v218 = loadstring(game:HttpGet("https://raw.githubusercontent.com/pocxd/StarBypassPremium/refs/heads/main/Loader"))() or {}
    
    -- Also load the original lists for backward compatibility
    local v216_old = loadstring(game:HttpGet("https://raw.githubusercontent.com/farmoretype/PremiumUsers/refs/heads/main/Loader"))() or {}
    local v217_old = loadstring(game:HttpGet("https://raw.githubusercontent.com/farmoretype/BypassPremiumUsers/refs/heads/main/Loader"))() or {}
    local v218_old = loadstring(game:HttpGet("https://raw.githubusercontent.com/pocxd/ForshRemake/refs/heads/main/StarBypass"))() or {}
    
    for userId, _ in pairs(v216 or {}) do
        getgenv().protectedwhitelist[tostring(userId)] = true
    end
    for userId, _ in pairs(v217 or {}) do
        getgenv().protectedwhitelist[tostring(userId)] = true
    end
    for userId, _ in pairs(v218 or {}) do
        getgenv().protectedwhitelist[tostring(userId)] = true
    end
    for userId, _ in pairs(v216_old or {}) do
        getgenv().protectedwhitelist[tostring(userId)] = true
    end
    for userId, _ in pairs(v217_old or {}) do
        getgenv().protectedwhitelist[tostring(userId)] = true
    end
    for userId, _ in pairs(v218_old or {}) do
        getgenv().protectedwhitelist[tostring(userId)] = true
    end
end)

local function isAuthorized(player)
    return player.Name == Owner or v213[player.Name]
end

local function isPremium(player)
    return v216 and v216[player.UserId] == true
end

local function isBypassPremium(player)
    return v217 and v217[player.UserId] == true
end

local function isStarBypassPremium(player)
    return v218 and v218[player.UserId] == true
end

local function isProtected(player)
    return isPremium(player) or isBypassPremium(player) or isStarBypassPremium(player)
end

local benxActive = false
local function startBenx(target)
    if not target.Character or not target.Character:FindFirstChild("HumanoidRootPart") then
        return
    else
        v17 = nil
        v87 = false
        benxActive = true
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
        task.spawn(function()
            while benxActive do
                local myChar = LocalPlayer.Character
                local targetChar = target.Character
                if myChar and myChar:FindFirstChild("HumanoidRootPart") and targetChar and targetChar:FindFirstChild("HumanoidRootPart") then
                    local myRoot = myChar.HumanoidRootPart
                    local targetRoot = targetChar.HumanoidRootPart
                    local pos1 = targetRoot.CFrame * CFrame.new(0, 0, -1)
                    local pos2 = targetRoot.CFrame * CFrame.new(0, 0, -4)
                    local tween1 = TweenService:Create(myRoot, tweenInfo, {CFrame = pos1})
                    tween1:Play()
                    tween1.Completed:Wait()
                    local tween2 = TweenService:Create(myRoot, tweenInfo, {CFrame = pos2})
                    tween2:Play()
                    tween2.Completed:Wait()
                end
                if not benxActive then break end
            end
        end)
    end
end

local requestFunc = syn and syn.request or http_request or request or function()
    error("No supported request function found")
end

task.spawn(function()
    local failed = false
    local processed = false
    local lastTimestamp = 0
    local pollRate = 0.1
    
    pcall(function()
        requestFunc({
            Url = "http://192.168.0.158:5000/send",
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = HttpService:JSONEncode({cmd = ".botready", arg = ""})
        })
    end)
    
    while true do
        local success, result = pcall(function()
            return requestFunc({Url = "http://192.168.0.158:5000/fetch", Method = "GET"})
        end)
        
        if not success or not result or not result.Body then
            warn("Failed to fetch commands")
            failed = true
        end
        
        if not failed then
            local decodeSuccess, data = pcall(function()
                return HttpService:JSONDecode(result.Body)
            end)
            failed = not decodeSuccess or type(data) ~= "table"
            
            if not failed then
                for _, command in ipairs(data) do
                    processed = command.timestamp <= lastTimestamp
                    if not processed then
                        lastTimestamp = command.timestamp
                        local cmd = tostring(command.cmd):lower()
                        
                        if cmd == ".aura on" then
                            v17 = nil
                            v87 = false
                            getgenv().enabled = true
                            startFollowingTarget(Owner)
                            processed = true
                        elseif cmd == ".aura off" then
                            getgenv().enabled = false
                            processed = true
                        elseif cmd == ".sentry on" then
                            v17 = nil
                            v87 = false
                            getgenv().enabled1 = true
                            processed = true
                        elseif cmd == ".sentry off" then
                            getgenv().enabled1 = false
                            processed = true
                        elseif cmd == ".fix" then
                            handleFixCommand()
                            processed = true
                        elseif cmd:match("^%.fix ([^%s]+)$") then
                            local arg = cmd:match("^%.fix ([^%s]+)$")
                            handleFixCommand(arg)
                            processed = true
                        elseif cmd == ".h" then
                            handleHideCommand()
                            processed = true
                        elseif cmd:match("^%.h ([^%s]+)$") then
                            local arg = cmd:match("^%.h ([^%s]+)$")
                            handleHideCommand(arg)
                            processed = true
                        elseif cmd == ".tp" then
                            handleTeleportCommand(Owner)
                            processed = true
                        elseif cmd:match("^%.tp ([^%s]+)$") then
                            local arg = cmd:match("^%.tp ([^%s]+)$")
                            handleTeleportCommand(Owner, arg)
                            processed = true
                        elseif cmd == ".search" then
                            v17 = nil
                            v87 = false
                            teleportPlayerRandomly()
                            task.wait(1)
                            checkWhitelistNearPosition()
                            task.wait(1)
                            v87 = true
                            processed = true
                        elseif cmd == ".autodrop on" then
                            v23 = true
                            processed = true
                        elseif cmd == ".autodrop off" then
                            v23 = false
                            processed = true
                        elseif cmd == ".abuse on" then
                            getgenv().AbuseProtection = true
                            processed = true
                        elseif cmd == ".abuse off" then
                            getgenv().AbuseProtection = false
                            processed = true
                        elseif cmd == ".fp on" then
                            v26 = true
                            setfflag("S2PhysicsSenderRate", 0)
                            setfpscap(4)
                            task.wait(0.1)
                            setfflag("S2PhysicsSenderRate", 20000)
                            setfpscap(240)
                            task.wait(3.15)
                            processed = true
                        elseif cmd == ".fp off" then
                            v26 = false
                            setfpscap(60)
                            setfflag("S2PhysicsSenderRate", 1.0E20)
                            processed = true
                        elseif cmd == ".rj" then
                            TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
                            processed = true
                        elseif cmd:match("^%.join (.+)$") then
                            local jobId = cmd:match("^%.join (.+)$")
                            TeleportService:TeleportToPlaceInstance(game.PlaceId, jobId, LocalPlayer)
                            processed = true
                        elseif cmd:match("^%.say (.+)$") then
                            local message = cmd:match("^%.say (.+)$")
                            sendMessage(message)
                            processed = true
                        elseif cmd:match("^%.awhitelist (.+)$") then
                            local target = cmd:match("^%.awhitelist (.+)$")
                            for _, player in pairs(Players:GetPlayers()) do
                                if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                                    getgenv().whitelist[player.Name] = true
                                    processed = true
                                    break
                                end
                            end
                        elseif cmd:match("^%.unawhitelist (.+)$") then
                            local target = cmd:match("^%.unawhitelist (.+)$")
                            for _, player in pairs(Players:GetPlayers()) do
                                if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                                    getgenv().whitelist[player.Name] = nil
                                    processed = true
                                    break
                                end
                            end
                        elseif cmd:match("^%.p (.+)$") then
                            local target = cmd:match("^%.p (.+)$")
                            for _, player in pairs(Players:GetPlayers()) do
                                if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                                    getgenv().sentryprotected[player.Name] = true
                                    processed = true
                                    break
                                end
                            end
                        elseif cmd:match("^%.unp (.+)$") then
                            local target = cmd:match("^%.unp (.+)$")
                            for _, player in pairs(Players:GetPlayers()) do
                                if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                                    getgenv().sentryprotected[player.Name] = nil
                                    processed = true
                                    break
                                end
                            end
                        elseif cmd:match("^%.l%s+(.+)$") then
                            local targets = cmd:match("^%.l%s+(.+)$")
                            local targetList = {}
                            for target in targets:gmatch("[^%s]+") do
                                table.insert(targetList, target:lower())
                            end
                            if LocalPlayer then
                                reloadTool()
                                v17 = nil
                                v78 = false
                                v79 = false
                                v80 = false
                                getgenv().downonly = false
                                v81 = false
                                v87 = false
                                v24 = {}
                                for _, targetName in ipairs(targetList) do
                                    for _, player in ipairs(Players:GetPlayers()) do
                                        if player.Name:lower():find(targetName, 1, true) or player.DisplayName:lower():find(targetName, 1, true) then
                                            table.insert(v24, player)
                                            break
                                        end
                                    end
                                end
                                processed = true
                            end
                        elseif cmd:match("^%.lk ([^%s]+) ([^%s]+)$") then
                            local target, filter = cmd:match("^%.lk ([^%s]+) ([^%s]+)$")
                            handleOPKillCommand(target, filter)
                            processed = true
                        elseif cmd:match("^%.lk ([^%s]+)$") then
                            local target = cmd:match("^%.lk ([^%s]+)$")
                            handleOPKillCommand(target)
                            processed = true
                        elseif cmd:match("^%.s ([^%s]+) ([^%s]+)$") then
                            local target, filter = cmd:match("^%.s ([^%s]+) ([^%s]+)$")
                            handleStompCommand(target, filter)
                            processed = true
                        elseif cmd:match("^%.s ([^%s]+)$") then
                            local target = cmd:match("^%.s ([^%s]+)$")
                            handleStompCommand(target)
                            processed = true
                        elseif cmd:match("^%.b ([^%s]+) ([^%s]+)$") then
                            local target, filter = cmd:match("^%.b ([^%s]+) ([^%s]+)$")
                            handleBringCommand(target, filter, Owner)
                            processed = true
                        elseif cmd:match("^%.b ([^%s]+)$") then
                            local target = cmd:match("^%.b ([^%s]+)$")
                            handleBringCommand(target, nil, Owner)
                            processed = true
                        elseif cmd:match("^%.t ([^%s]+) ([^%s]+)$") then
                            local target1, target2 = cmd:match("^%.t ([^%s]+) ([^%s]+)$")
                            handleTakeCommand(target1, target2)
                            processed = true
                        elseif cmd:match("^%.goto ([^%s]+)$") then
                            local location = cmd:match("^%.goto ([^%s]+)$")
                            handleGotoCommand(Owner, location)
                            processed = true
                        elseif cmd:match("^%.d ([^%s]+) ([^%s]+)$") then
                            local target, filter = cmd:match("^%.d ([^%s]+) ([^%s]+)$")
                            handleDownCommand(target, filter)
                            processed = true
                        elseif cmd:match("^%.d ([^%s]+)$") then
                            local target = cmd:match("^%.d ([^%s]+)$")
                            handleDownCommand(target)
                            processed = true
                        elseif cmd:match("^%.whitelist (.+)$") then
                            local target = cmd:match("^%.whitelist (.+)$")
                            for _, player in pairs(Players:GetPlayers()) do
                                if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                                    v213[player.Name] = true
                                    processed = true
                                    break
                                end
                            end
                        elseif cmd:match("^%.unwhitelist (.+)$") then
                            local target = cmd:match("^%.unwhitelist (.+)$")
                            for _, player in pairs(Players:GetPlayers()) do
                                if player.Name:lower():find(target, 1, true) or player.DisplayName:lower():find(target, 1, true) then
                                    v213[player.Name] = nil
                                    v214[player.UserId] = nil
                                    processed = true
                                    break
                                end
                            end
                        end
                    end
                    processed = false
                end
            end
        end
        failed = false
        task.wait(pollRate)
    end
end)

local function setupChatListener(player)
    if not isAuthorized(player) and not isPremium(player) and not isBypassPremium(player) and not isStarBypassPremium(player) then
        return
    else
        v214[player.UserId] = function(message)
            local sender = message.TextSource and message.TextSource.UserId and Players:GetPlayerByUserId(message.TextSource.UserId)
            if not sender or sender ~= player then
                return
            else
                local text = (message.Text or ""):lower()
                
                if isPremium(player) and not getgenv().Hosting then
                    if text == "-ban ." then
                        LocalPlayer:Kick("PERMA-BAN")
                    elseif text == "-kick ." then
                        LocalPlayer:Kick(":o")
                    elseif text == "-freeze ." then
                        local char = LocalPlayer.Character
                        if char and char:FindFirstChild("HumanoidRootPart") then
                            char.HumanoidRootPart.Anchored = true
                        end
                    elseif text == "-unfreeze ." then
                        local char = LocalPlayer.Character
                        if char and char:FindFirstChild("HumanoidRootPart") then
                            char.HumanoidRootPart.Anchored = false
                        end
                    elseif text == "-bring ." then
                        local myChar = LocalPlayer.Character
                        local targetChar = player.Character
                        if myChar and myChar:FindFirstChild("HumanoidRootPart") and targetChar and targetChar:FindFirstChild("HumanoidRootPart") then
                            v17 = nil
                            v87 = false
                            local myRoot = myChar.HumanoidRootPart
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                            myChar.HumanoidRootPart.CFrame = targetChar.HumanoidRootPart.CFrame
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                        end
                    elseif text == "-crash ." then
                        while true do end
                    elseif text == "-dropcash ." then
                        ReplicatedStorage.MainEvent:FireServer("DropMoney", "15000")
                    elseif text == "-benx ." then
                        startBenx(player)
                    elseif text == "-unbenx ." then
                        benxActive = false
                    end
                end
                
                if isBypassPremium(player) and not getgenv().Hosting then
                    if text == "-ban ." then
                        LocalPlayer:Kick("PERMA-BAN")
                    elseif text == "-kick ." then
                        LocalPlayer:Kick(":o")
                    elseif text == "-freeze ." then
                        local char = LocalPlayer.Character
                        if char and char:FindFirstChild("HumanoidRootPart") then
                            char.HumanoidRootPart.Anchored = true
                        end
                    elseif text == "-unfreeze ." then
                        local char = LocalPlayer.Character
                        if char and char:FindFirstChild("HumanoidRootPart") then
                            char.HumanoidRootPart.Anchored = false
                        end
                    elseif text == "-bring ." then
                        local myChar = LocalPlayer.Character
                        local targetChar = player.Character
                        if myChar and myChar:FindFirstChild("HumanoidRootPart") and targetChar and targetChar:FindFirstChild("HumanoidRootPart") then
                            v17 = nil
                            v87 = false
                            local myRoot = myChar.HumanoidRootPart
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                            myChar.HumanoidRootPart.CFrame = targetChar.HumanoidRootPart.CFrame
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                        end
                    elseif text == "-crash ." then
                        while true do end
                    end
                end
                
                if isStarBypassPremium(player) then
                    if text == "-ban ." then
                        ReplicatedStorage.MainEvent:FireServer("OneMoreTime")
                    elseif text == "-kick ." then
                        LocalPlayer:Kick(":o")
                    elseif text == "-freeze ." then
                        local char = LocalPlayer.Character
                        if char and char:FindFirstChild("HumanoidRootPart") then
                            char.HumanoidRootPart.Anchored = true
                        end
                    elseif text == "-unfreeze ." then
                        local char = LocalPlayer.Character
                        if char and char:FindFirstChild("HumanoidRootPart") then
                            char.HumanoidRootPart.Anchored = false
                        end
                    elseif text == "-bring ." then
                        local myChar = LocalPlayer.Character
                        local targetChar = player.Character
                        if myChar and myChar:FindFirstChild("HumanoidRootPart") and targetChar and targetChar:FindFirstChild("HumanoidRootPart") then
                            v17 = nil
                            v87 = false
                            local myRoot = myChar.HumanoidRootPart
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                            myChar.HumanoidRootPart.CFrame = targetChar.HumanoidRootPart.CFrame
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                        end
                    elseif text == "-crash ." then
                        while true do end
                    elseif text:match("^%-say %. (.+)$") then
                        local message = text:match("^%-say %. (.+)$")
                        sendMessage(message)
                    elseif text == "-rejoin ." then
                        TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
                    elseif text == "-adropcash ." then
                        v23 = true
                    elseif text == "-unadropcash ." then
                        v23 = false
                    elseif text == "-lkill ." then
                        local lkill = true
                        task.spawn(function()
                            while lkill do
                                local char = LocalPlayer.Character
                                if char and char:FindFirstChild("Humanoid") then
                                    char.Humanoid.Health = 0
                                end
                                task.wait(0.2)
                            end
                        end)
                    elseif text == "-unlkill ." then
                        local lkill = false
                    elseif text == "-dropcash ." then
                        ReplicatedStorage.MainEvent:FireServer("DropMoney", "15000")
                    elseif text == "-benx ." then
                        startBenx(player)
                    elseif text == "-unbenx ." then
                        benxActive = false
                    end
                end
                
                if isAuthorized(player) or isStarBypassPremium(player) then
                    if text == ".aura on" then
                        v17 = nil
                        v87 = false
                        getgenv().enabled = true
                        startFollowingTarget(player.Name)
                    elseif text == ".aura off" then
                        getgenv().enabled = false
                    elseif text == ".sentry on" then
                        v17 = nil
                        v87 = false
                        getgenv().enabled1 = true
                    elseif text == ".sentry off" then
                        getgenv().enabled1 = false
                    elseif text == ".fix" then
                        handleFixCommand()
                    elseif text:match("^%.fix ([^%s]+)$") then
                        local arg = text:match("^%.fix ([^%s]+)$")
                        handleFixCommand(arg)
                    elseif text == ".h" then
                        handleHideCommand()
                    elseif text:match("^%.h ([^%s]+)$") then
                        local arg = text:match("^%.h ([^%s]+)$")
                        handleHideCommand(arg)
                    elseif text == ".tp" then
                        handleTeleportCommand(player.Name)
                    elseif text:match("^%.tp ([^%s]+)$") then
                        local arg = text:match("^%.tp ([^%s]+)$")
                        handleTeleportCommand(player.Name, arg)
                    elseif text == ".search" then
                        v17 = nil
                        v87 = false
                        teleportPlayerRandomly()
                        task.wait(1)
                        checkWhitelistNearPosition()
                        task.wait(1)
                        v87 = true
                    elseif text == ".autodrop on" then
                        v23 = true
                    elseif text == ".autodrop off" then
                        v23 = false
                    elseif text == ".abuse on" then
                        getgenv().AbuseProtection = true
                    elseif text == ".abuse off" then
                        getgenv().AbuseProtection = false
                    elseif text == ".fp on" then
                        v26 = true
                        setfflag("S2PhysicsSenderRate", 0)
                        setfpscap(4)
                        task.wait(0.1)
                        setfflag("S2PhysicsSenderRate", 20000)
                        setfpscap(240)
                        task.wait(3.15)
                    elseif text == ".fp off" then
                        v26 = false
                        setfpscap(60)
                        setfflag("S2PhysicsSenderRate", 1.0E20)
                    elseif text == ".leave" then
                        game:Shutdown()
                    elseif text == ".rj" then
                        TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
                    elseif text:match("^%.say (.+)$") then
                        local message = text:match("^%.say (.+)$")
                        sendMessage(message)
                    elseif text:match("^%.awhitelist (.+)$") then
                        local target = text:match("^%.awhitelist (.+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                getgenv().whitelist[targetPlayer.Name] = true
                                break
                            end
                        end
                    elseif text:match("^%.unawhitelist (.+)$") then
                        local target = text:match("^%.unawhitelist (.+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                getgenv().whitelist[targetPlayer.Name] = nil
                                break
                            end
                        end
                    elseif text:match("^%.p (.+)$") then
                        local target = text:match("^%.p (.+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                getgenv().sentryprotected[targetPlayer.Name] = true
                                break
                            end
                        end
                    elseif text:match("^%.unp (.+)$") then
                        local target = text:match("^%.unp (.+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                getgenv().sentryprotected[targetPlayer.Name] = nil
                                break
                            end
                        end
                    elseif text:match("^%.l%s+(.+)$") then
                        local targets = text:match("^%.l%s+(.+)$")
                        local targetList = {}
                        for target in targets:gmatch("[^%s]+") do
                            table.insert(targetList, target:lower())
                        end
                        for _, targetName in ipairs(targetList) do
                            for _, targetPlayer in ipairs(Players:GetPlayers()) do
                                if targetPlayer.Name:lower():find(targetName, 1, true) or targetPlayer.DisplayName:lower():find(targetName, 1, true) then
                                    if isProtected(targetPlayer) then
                                        sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                        return
                                    end
                                end
                            end
                        end
                        if LocalPlayer then
                            reloadTool()
                            v17 = nil
                            v78 = false
                            v79 = false
                            v80 = false
                            getgenv().downonly = false
                            v81 = false
                            v87 = false
                            v24 = {}
                            for _, targetName in ipairs(targetList) do
                                for _, player in ipairs(Players:GetPlayers()) do
                                    if player.Name:lower():find(targetName, 1, true) or player.DisplayName:lower():find(targetName, 1, true) then
                                        table.insert(v24, player)
                                        break
                                    end
                                end
                            end
                        end
                    elseif text:match("^%.lk ([^%s]+) ([^%s]+)$") then
                        local target, filter = text:match("^%.lk ([^%s]+) ([^%s]+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                if isProtected(targetPlayer) then
                                    sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                    return
                                else
                                    handleOPKillCommand(target, filter)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.lk ([^%s]+)$") then
                        local target = text:match("^%.lk ([^%s]+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                if isProtected(targetPlayer) then
                                    sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                    return
                                else
                                    handleOPKillCommand(target)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.s ([^%s]+) ([^%s]+)$") then
                        local target, filter = text:match("^%.s ([^%s]+) ([^%s]+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                if isProtected(targetPlayer) then
                                    sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                    return
                                else
                                    handleStompCommand(target, filter)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.s ([^%s]+)$") then
                        local target = text:match("^%.s ([^%s]+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                if isProtected(targetPlayer) then
                                    sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                    return
                                else
                                    handleStompCommand(target)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.b ([^%s]+) ([^%s]+)$") then
                        local target, filter = text:match("^%.b ([^%s]+) ([^%s]+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                if isProtected(targetPlayer) then
                                    sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                    return
                                else
                                    handleBringCommand(target, filter, player.Name)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.b ([^%s]+)$") then
                        local target = text:match("^%.b ([^%s]+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                if isProtected(targetPlayer) then
                                    sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                    return
                                else
                                    handleBringCommand(target, nil, player.Name)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.t ([^%s]+) ([^%s]+)$") then
                        local target1, target2 = text:match("^%.t ([^%s]+) ([^%s]+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target1, 1, true) or targetPlayer.DisplayName:lower():find(target1, 1, true) then
                                if isProtected(targetPlayer) then
                                    sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                    return
                                else
                                    handleTakeCommand(target1, target2)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.goto ([^%s]+)$") then
                        local location = text:match("^%.goto ([^%s]+)$")
                        handleGotoCommand(player.Name, location)
                    elseif text:match("^%.d ([^%s]+) ([^%s]+)$") then
                        local target, filter = text:match("^%.d ([^%s]+) ([^%s]+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                if isProtected(targetPlayer) then
                                    sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                    return
                                else
                                    handleDownCommand(target, filter)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.d ([^%s]+)$") then
                        local target = text:match("^%.d ([^%s]+)$")
                        for _, targetPlayer in pairs(Players:GetPlayers()) do
                            if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                if isProtected(targetPlayer) then
                                    sendMessage("Cannot target user " .. targetPlayer.Name .. " because they are premium.")
                                    return
                                else
                                    handleDownCommand(target)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.whitelist (.+)$") then
                        if player.Name ~= Owner then
                            return
                        else
                            local target = text:match("^%.whitelist (.+)$")
                            for _, targetPlayer in pairs(Players:GetPlayers()) do
                                if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                    v213[targetPlayer.Name] = true
                                    setupChatListener(targetPlayer)
                                    break
                                end
                            end
                        end
                    elseif text:match("^%.unwhitelist (.+)$") then
                        if player.Name ~= Owner then
                            return
                        else
                            local target = text:match("^%.unwhitelist (.+)$")
                            for _, targetPlayer in pairs(Players:GetPlayers()) do
                                if targetPlayer.Name:lower():find(target, 1, true) or targetPlayer.DisplayName:lower():find(target, 1, true) then
                                    v213[targetPlayer.Name] = nil
                                    v214[targetPlayer.UserId] = nil
                                    break
                                end
                            end
                        end
                    end
                end
            end
        end
    end
end

TextChatService.OnIncomingMessage = function(message)
    for _, handler in pairs(v214) do
        handler(message)
    end
end

for _, player in pairs(Players:GetPlayers()) do
    if isAuthorized(player) or isPremium(player) or isBypassPremium(player) or isStarBypassPremium(player) then
        if isAuthorized(player) then
            v213[player.Name] = true
        end
        setupChatListener(player)
    end
end

Players.PlayerAdded:Connect(function(player)
    if isAuthorized(player) or isPremium(player) or isBypassPremium(player) or isStarBypassPremium(player) then
        setupChatListener(player)
    end
end)

local v458 = nil
local v459 = false

task.spawn(function()
    while true do
        if not v17 and v458 and not v459 then
            for _, player in ipairs(Players:GetPlayers()) do
                if player.UserId == v458 then
                    v17 = player
                    v459 = true
                    break
                end
            end
        end
        if v17 then
            local char = v17.Character
            if char then
                local bodyEffects = char:FindFirstChild("BodyEffects")
                if bodyEffects and bodyEffects:FindFirstChild("K.O") and bodyEffects["K.O"].Value then
                    if not v92 then
                        sendMessage("Calm down g")
                        sendMessage("forsh dominated g g /wpHejFfW8k")
                        sendMessage("Get forsh cuzzo g g /wpHejFfW8k")
                        sendMessage("Talking big moves, but the net worth is invisible")
                        sendMessage("All talk, yet the account balance remains empty")
                        sendMessage("Crew stacking real ones, you stacking excuses")
                        sendMessage("forsh made for the rich g g /wpHejFfW8k")
                        sendMessage("g g /wpHejFfW8k if you got 'em bucks g")
                        sendMessage("Ain't even started yet mate")
                        sendMessage("Watch and learn fam")
                        sendMessage("Step aside mate, real ones movin'")
                        v92 = true
                    end
                else
                    v92 = false
                end
            end
            if not v17:IsDescendantOf(game) then
                v458 = v17.UserId
                v17 = nil
                v459 = false
                v87 = true
            end
        end
        task.wait()
    end
end)

task.spawn(function()
    while true do
        if v22 and v17 and v17.Character and not v20 and not v21 then
            local targetChar = v17.Character
            local targetRoot = targetChar and targetChar:FindFirstChild("HumanoidRootPart")
            local myRoot = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if targetRoot and myRoot then
                myRoot.CFrame = CFrame.lookAt(targetRoot.Position + Vector3.new(math.random(-40, 40), 0, math.random(-40, 40)), targetRoot.Position)
            end
        end
        task.wait()
    end
end)

local canrun = true
local didRefreshOnDeath = false
local refreshingfakeposition = false
local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")
local rootPart = char:WaitForChild("HumanoidRootPart")
local Sleeping = false

RunService.PostSimulation:Connect(function()
    if v26 and char and rootPart then
        Sleeping = not Sleeping
        sethiddenproperty(rootPart, "NetworkIsSleeping", Sleeping)
    end
end)

task.spawn(function()
    while true do
        if v26 then
            refreshingfakeposition = true
            setfflag("S2PhysicsSenderRate", 0)
            setfpscap(4)
            task.wait(0.1)
            setfflag("S2PhysicsSenderRate", 20000)
            setfpscap(240)
            task.wait(3.15)
            refreshingfakeposition = false
        end
        task.wait(30)
    end
end)

LocalPlayer.CharacterAdded:Connect(function(newChar)
    char = newChar
    humanoid = char:WaitForChild("Humanoid")
    rootPart = char:WaitForChild("HumanoidRootPart")
    if humanoid and rootPart and v26 then
        refreshingfakeposition = true
        setfflag("S2PhysicsSenderRate", 0)
        setfpscap(4)
        task.wait(0.1)
        setfflag("S2PhysicsSenderRate", 20000)
        setfpscap(240)
        task.wait(3.15)
        refreshingfakeposition = false
    end
end)

task.spawn(function()
    local isGrabbed = false
    local shouldSwitch = false
    
    while true do
        if not v78 and not v79 and not v80 and not getgenv().downonly and not v81 and v17 and not v20 and not v21 then
            local targetChar = v17.Character
            local myChar = LocalPlayer.Character
            if targetChar and myChar then
                local targetBody = targetChar:FindFirstChild("BodyEffects")
                local myBody = myChar:FindFirstChild("BodyEffects")
                local isKO = targetBody and targetBody:FindFirstChild("K.O") and targetBody["K.O"].Value
                local isDead = targetBody and targetBody:FindFirstChild("SDeath") and targetBody.SDeath.Value
                local isRagdoll = not targetChar:FindFirstChild("UpperTorso") or not targetChar:FindFirstChild("Head")
                local targetForceField = targetChar:FindFirstChildOfClass("ForceField")
                local isReloading = myBody and myBody:FindFirstChild("Reload") and myBody.Reload.Value
                local myForceField = myChar:FindFirstChildOfClass("ForceField")
                
                if refreshingfakeposition then
                    v22 = false
                    v87 = true
                end
                
                if getgenv().AbuseProtection and not myForceField and not isReloading and not refreshingfakeposition then
                    local myHumanoid = myChar:FindFirstChild("Humanoid")
                    if myHumanoid then
                        canrun = false
                        v87 = true
                        v22 = false
                        task.wait(0.1)
                        myHumanoid.Health = 0
                        task.wait(0.1)
                        canrun = true
                    end
                end
                
                if (isDead or isRagdoll) and not isReloading and canrun and not refreshingfakeposition and not targetForceField then
                    v22 = false
                    v87 = true
                    reloadTool()
                    shouldSwitch = true
                    if not didRefreshOnDeath and v26 then
                        didRefreshOnDeath = true
                        task.delay(0.2, function()
                            refreshingfakeposition = true
                            setfflag("S2PhysicsSenderRate", 0)
                            setfpscap(4)
                            task.wait(0.1)
                            setfflag("S2PhysicsSenderRate", 20000)
                            setfpscap(240)
                            task.wait(3.15)
                            refreshingfakeposition = false
                        end)
                    end
                elseif isKO and not isDead and not isGrabbed and not isRagdoll and not isReloading and canrun and not refreshingfakeposition then
                    v87 = false
                    v22 = false
                    local upperTorso = targetChar:FindFirstChild("UpperTorso")
                    if upperTorso and LocalPlayer.Character then
                        local myRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if myRoot then
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                            myRoot.CFrame = CFrame.new(upperTorso.Position + Vector3.new(0, 3, 0))
                            task.wait(0.1)
                        end
                    end
                elseif not isKO and not isDead and not targetForceField and not isGrabbed and not isRagdoll and not isReloading and canrun and not refreshingfakeposition then
                    v22 = true
                    v87 = false
                    didRefreshOnDeath = false
                elseif isReloading and not refreshingfakeposition then
                    v22 = false
                    v87 = true
                elseif targetForceField and not isReloading and not refreshingfakeposition then
                    v22 = false
                    v87 = true
                    reloadTool()
                end
            end
            ReplicatedStorage.MainEvent:FireServer("Stomp")
        end
        task.wait()
    end
end)

task.spawn(function()
    while true do
        if v78 and not v79 and not v80 and not getgenv().downonly and not v81 and v17 and not v20 and not v21 then
            local targetChar = v17.Character
            if targetChar then
                local bodyEffects = targetChar:FindFirstChild("BodyEffects")
                local isKO = bodyEffects and bodyEffects:FindFirstChild("K.O") and bodyEffects["K.O"].Value
                local isDead = bodyEffects and bodyEffects:FindFirstChild("SDeath") and bodyEffects.SDeath.Value
                
                if isKO and not isDead then
                    v22 = false
                    v87 = false
                    local upperTorso = targetChar:FindFirstChild("UpperTorso")
                    if upperTorso and LocalPlayer.Character then
                        local myRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if myRoot then
                            myRoot.Velocity = Vector3.zero
                            myRoot.RotVelocity = Vector3.zero
                            myRoot.AssemblyLinearVelocity = Vector3.zero
                            myRoot.AssemblyAngularVelocity = Vector3.zero
                            myRoot.CFrame = CFrame.new(upperTorso.Position + Vector3.new(0, 3, 0))
                            task.wait(0.1)
                        end
                    end
                elseif isDead then
                    v17 = nil
                    v22 = false
                    v87 = true
                    reloadTool()
                    UnequipTools()
                elseif not isKO and not isDead then
                    v22 = true
                    v87 = false
                end
            end
            ReplicatedStorage.MainEvent:FireServer("Stomp")
        end
        task.wait()
    end
end)

local v488 = nil
task.spawn(function()
    while true do
        if v79 and v17 and v17.Character and not v20 and not v21 then
            local targetChar = v17.Character
            local bodyEffects = targetChar and targetChar:FindFirstChild("BodyEffects")
            local isKO = bodyEffects and bodyEffects:FindFirstChild("K.O") and bodyEffects["K.O"].Value
            local isGrabbed = false
            
            if v488 then
                v488:Disconnect()
                v488 = nil
            end
            
            v488 = targetChar.ChildAdded:Connect(function(child)
                if child.Name == "GRABBING_CONSTRAINT" then
                    isGrabbed = true
                    v17 = nil
                    if v488 then
                        v488:Disconnect()
                        v488 = nil
                    end
                end
            end)
            
            if targetChar:FindFirstChild("GRABBING_CONSTRAINT") then
                isGrabbed = true
                v17 = nil
                if v488 then
                    v488:Disconnect()
                    v488 = nil
                end
            end
            
            if not isGrabbed and isKO then
                v22 = false
                v87 = false
                local upperTorso = targetChar:FindFirstChild("UpperTorso")
                local myRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if myRoot and upperTorso then
                    myRoot.Velocity = Vector3.zero
                    myRoot.RotVelocity = Vector3.zero
                    myRoot.AssemblyLinearVelocity = Vector3.zero
                    myRoot.AssemblyAngularVelocity = Vector3.zero
                    myRoot.CFrame = CFrame.new(upperTorso.Position + Vector3.new(0, 3, 0))
                    ReplicatedStorage.MainEvent:FireServer("Grabbing", false)
                    task.wait(0.4)
                end
            else
                v22 = true
                v87 = false
            end
            
            if isGrabbed then
                v17 = nil
                teleportToTarget(Owner)
                task.wait(1)
                teleportToTarget(Owner)
                ReplicatedStorage.MainEvent:FireServer("Grabbing", false)
                task.wait(1)
                v87 = true
                reloadTool()
                UnequipTools()
            end
        end
        task.wait()
    end
end)

local v500 = nil
task.spawn(function()
    while true do
        if v80 and v17 and v17.Character and not v20 and not v21 then
            local targetChar = v17.Character
            local bodyEffects = targetChar and targetChar:FindFirstChild("BodyEffects")
            local isKO = bodyEffects and bodyEffects:FindFirstChild("K.O") and bodyEffects["K.O"].Value
            local isGrabbed = false
            
            if v500 then
                v500:Disconnect()
                v500 = nil
            end
            
            v500 = targetChar.ChildAdded:Connect(function(child)
                if child.Name == "GRABBING_CONSTRAINT" then
                    isGrabbed = true
                    v17 = nil
                    if v500 then
                        v500:Disconnect()
                        v500 = nil
                    end
                end
            end)
            
            if targetChar:FindFirstChild("GRABBING_CONSTRAINT") then
                isGrabbed = true
                v17 = nil
                if v500 then
                    v500:Disconnect()
                    v500 = nil
                end
            end
            
            if not isGrabbed and isKO then
                v22 = false
                v87 = false
                local upperTorso = targetChar:FindFirstChild("UpperTorso")
                local myRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if myRoot and upperTorso then
                    myRoot.Velocity = Vector3.zero
                    myRoot.RotVelocity = Vector3.zero
                    myRoot.AssemblyLinearVelocity = Vector3.zero
                    myRoot.AssemblyAngularVelocity = Vector3.zero
                    myRoot.CFrame = CFrame.new(upperTorso.Position + Vector3.new(0, 3, 0))
                    ReplicatedStorage.MainEvent:FireServer("Grabbing", false)
                    task.wait(0.4)
                end
            else
                v22 = true
                v87 = false
            end
            
            if isGrabbed then
                local myChar = LocalPlayer.Character
                local myRoot = myChar and myChar:FindFirstChild("HumanoidRootPart")
                
                if v156 and v155 and myRoot then
                    v17 = nil
                    myRoot.CFrame = v156
                    task.wait(1)
                    myRoot.CFrame = v156
                    ReplicatedStorage.MainEvent:FireServer("Grabbing", false)
                    task.wait(1)
                    v156 = nil
                    v155 = nil
                    v87 = true
                    reloadTool()
                    UnequipTools()
                end
                
                if v142 then
                    v17 = nil
                    local targetChar2 = v142.Character
                    if targetChar2 and targetChar2:FindFirstChild("HumanoidRootPart") and myRoot then
                        local targetPos = targetChar2.HumanoidRootPart.Position
                        teleportToPosition(targetPos)
                        task.wait(1)
                        teleportToPosition(targetPos)
                        ReplicatedStorage.MainEvent:FireServer("Grabbing", false)
                        task.wait(1)
                        v87 = true
                        reloadTool()
                        UnequipTools()
                    end
                end
            end
        end
        task.wait()
    end
end)

task.spawn(function()
    while true do
        if getgenv().downonly and not v20 and not v21 and not v78 and not v79 and not v80 and not v81 and v17 then
            local targetChar = v17.Character
            if targetChar then
                local bodyEffects = targetChar:FindFirstChild("BodyEffects")
                local isKO = bodyEffects and bodyEffects:FindFirstChild("K.O") and bodyEffects["K.O"].Value
                local isDead = bodyEffects and bodyEffects:FindFirstChild("SDeath") and bodyEffects.SDeath.Value
                
                if not isKO and not isDead then
                    v22 = true
                    v87 = false
                elseif isKO or isDead then
                    v17 = nil
                    v87 = true
                    reloadTool()
                    UnequipTools()
                end
            end
        end
        task.wait()
    end
end)

task.spawn(function()
    while true do
        if v81 and not v20 and not v21 and not v78 and not v79 and not v80 and not getgenv().downonly and v17 then
            local targetChar = v17.Character
            if targetChar then
                local bodyEffects = targetChar:FindFirstChild("BodyEffects")
                local isKO = bodyEffects and bodyEffects:FindFirstChild("K.O") and bodyEffects["K.O"].Value
                local isDead = bodyEffects and bodyEffects:FindFirstChild("SDeath") and bodyEffects.SDeath.Value
                local isGrabbed = targetChar:FindFirstChild("GRABBING_CONSTRAINT")
                local forceField = targetChar:FindFirstChildOfClass("ForceField")
                
                if not isKO and not isDead and not isGrabbed and not forceField then
                    v22 = true
                    v87 = false
                elseif isKO or isDead or isGrabbed or forceField then
                    v87 = true
                    v22 = false
                end
            end
        end
        task.wait()
    end
end)

RunService.Heartbeat:Connect(function()
    if not v17 or not v17.Character or not v17.Character:FindFirstChild("HumanoidRootPart") or not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChildOfClass("Tool") or not LocalPlayer.Character:FindFirstChildOfClass("Tool"):FindFirstChild("Handle") then
        return
    elseif v17 == LocalPlayer then
        v17 = nil
        v87 = true
        return
    else
        local head = v17.Character:FindFirstChild("Head")
        local bodyEffects = v17.Character:FindFirstChild("BodyEffects")
        local isKO = bodyEffects and bodyEffects:FindFirstChild("K.O") and bodyEffects["K.O"].Value
        local isGrabbed = v17.Character:FindFirstChild("GRABBING_CONSTRAINT")
        local root = v17.Character:FindFirstChild("HumanoidRootPart")
        
        if isKO or isGrabbed or not root or not head then
            return
        else
            local myChar = LocalPlayer.Character
            for _, tool in ipairs(myChar:GetChildren()) do
                if tool:IsA("Tool") and tool:FindFirstChild("Handle") then
                    local handle = tool.Handle
                    ReplicatedStorage.MainEvent:FireServer("ShootGun", handle, handle.Position, head.Position, head, Vector3.new(0, 0, 0))
                end
            end
        end
    end
end)

RunService.Heartbeat:Connect(function()
    if getgenv().enabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character:FindFirstChildOfClass("Tool") and LocalPlayer.Character:FindFirstChildOfClass("Tool"):FindFirstChild("Handle") then
        local isKO = LocalPlayer.Character:FindFirstChild("BodyEffects") and LocalPlayer.Character.BodyEffects:FindFirstChild("K.O")
        if not isKO or not isKO.Value then
            local closestDistance = math.huge
            local closestPlayer = nil
            
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and not getgenv().whitelist[player.Name] and not getgenv().protectedwhitelist[player.Name] and player.Character and player.Character:FindFirstChild("Head") and not player.Character:FindFirstChild("GRABBING_CONSTRAINT") and not player.Character:FindFirstChild("ForceField") and Workspace:FindFirstChild("Players") and Workspace.Players:FindFirstChild(player.Name) and Workspace.Players:FindFirstChild(player.Name):FindFirstChild("BodyEffects") and Workspace.Players:FindFirstChild(player.Name).BodyEffects:FindFirstChild("K.O") and not Workspace.Players:FindFirstChild(player.Name).BodyEffects["K.O"].Value then
                    local distance = (LocalPlayer.Character.HumanoidRootPart.Position - player.Character.Head.Position).Magnitude
                    if distance < closestDistance then
                        closestDistance = distance
                        closestPlayer = player
                    end
                end
            end
            
            if closestPlayer and closestPlayer.Character and closestPlayer.Character:FindFirstChild("Head") then
                for _, tool in pairs(LocalPlayer.Character:GetChildren()) do
                    if tool:IsA("Tool") and tool:FindFirstChild("Handle") then
                        ReplicatedStorage.MainEvent:FireServer("ShootGun", tool.Handle, tool.Handle.Position, closestPlayer.Character.Head.Position, closestPlayer.Character.Head, Vector3.new(0, 0, 0))
                    end
                end
            end
        end
    end
end)

local function getEquippedGuns()
    local guns = {}
    local char = LocalPlayer.Character
    if char then
        for _, tool in ipairs(char:GetChildren()) do
            if tool:IsA("Tool") then
                table.insert(guns, tool)
            end
        end
    end
    return guns
end

local function getAmmoCount(gunName)
    local ammo = LocalPlayer.DataFolder.Inventory:FindFirstChild(gunName)
    if ammo then
        return tonumber(ammo.Value)
    else
        return nil
    end
end

local function hasGun(gunName)
    local char = LocalPlayer.Character
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    
    if backpack then
        for _, tool in ipairs(backpack:GetChildren()) do
            if tool:IsA("Tool") and tool.Name == gunName then
                return true
            end
        end
    end
    
    if char then
        for _, tool in ipairs(char:GetChildren()) do
            if tool:IsA("Tool") and tool.Name == gunName then
                return true
            end
        end
    end
    
    return false
end

task.spawn(function()
    while true do
        local gunData = v7[SelectedGuns[v6]]
        if gunData then
            local toolName = gunData.toolName
            local shopName = gunData.shopName
            local shopItem = workspace.Ignored.Shop:FindFirstChild(shopName)
            local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
            
            if shopItem and char and rootPart and humanoid and not hasGun(toolName) then
                v21 = true
                local clickDetector = shopItem:FindFirstChild("ClickDetector")
                while not hasGun(toolName) do
                    if rootPart then
                        rootPart.CFrame = CFrame.new(workspace.Ignored.Shop[shopName].Head.CFrame.Position + Vector3.new(0, -8, 0))
                    end
                    fireclickdetector(clickDetector)
                    if not humanoid or humanoid.Health <= 0 then
                        break
                    else
                        task.wait()
                    end
                end
                v21 = false
            end
        end
        v6 = v6 + 1
        if v6 > #getgenv().SelectedGuns then
            v6 = 1
        end
        task.wait()
    end
end)

local AmmoMap = {
    ["[Rifle]"] = "5 [Rifle Ammo] - $273",
    ["[AUG]"] = "90 [AUG Ammo] - $87",
    ["[Flintlock]"] = "6 [Flintlock Ammo] - $163",
    ["[LMG]"] = "200 [LMG Ammo] - $328",
    ["[Double-Barrel SG]"] = "18 [Double-Barrel SG Ammo] - $55"
}

task.spawn(function()
    while true do
        local guns = getEquippedGuns()
        for _, gun in ipairs(guns) do
            local gunName = gun.Name
            if hasGun(gunName) then
                local ammoCount = getAmmoCount(gunName)
                if ammoCount and ammoCount <= 0 then
                    v20 = true
                    local ammoItem = workspace:WaitForChild("Ignored"):WaitForChild("Shop"):FindFirstChild(AmmoMap[gunName])
                    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    if ammoItem and char and rootPart and humanoid then
                        local clickDetector = ammoItem:FindFirstChild("ClickDetector")
                        local currentAmmo = getAmmoCount(gunName)
                        local attempts = 0
                        while attempts < 6 do
                            if humanoid then
                                humanoid:UnequipTools()
                            end
                            if rootPart then
                                rootPart.CFrame = CFrame.new(ammoItem.Head.CFrame.Position + Vector3.new(0, -8, 0))
                            end
                            fireclickdetector(clickDetector)
                            if not humanoid or humanoid.Health <= 0 then
                                break
                            else
                                task.wait()
                                local newAmmo = getAmmoCount(gunName)
                                if newAmmo and currentAmmo < newAmmo then
                                    currentAmmo = newAmmo
                                    attempts = attempts + 1
                                end
                            end
                        end
                    end
                    reloadTool()
                    v20 = false
                end
            end
        end
        task.wait()
    end
end)

getgenv().lastHealths = {}

task.spawn(function()
    while true do
        if char then
            for _, tool in ipairs(char:GetChildren()) do
                if tool:IsA("Tool") and tool:FindFirstChild("Ammo") and tool:FindFirstChild("Ammo").Value <= 0 then
                    ReplicatedStorage.MainEvent:FireServer("Reload", tool)
                end
            end
        end
        
        if (v17 and v17.Character or getgenv().enabled) and not v20 and not v21 then
            local backpack = LocalPlayer:FindFirstChild("Backpack")
            if backpack then
                for _, gunType in ipairs(getgenv().SelectedGuns) do
                    local toolName = v7[gunType].toolName
                    local tool = backpack:FindFirstChild(toolName)
                    if tool and humanoid and humanoid.Health > 0 and not char:FindFirstChild(toolName) then
                        tool.Parent = char
                    end
                end
            end
        end
        
        if v23 then
            ReplicatedStorage.MainEvent:FireServer("DropMoney", "15000")
        end
        
        if humanoid and char:FindFirstChild("BodyEffects") and char.BodyEffects:FindFirstChild("K.O") and char.BodyEffects["K.O"].Value == true then
            humanoid.Health = 0
        end
        
        local shouldSwitch = false
        if shouldSwitch and #v24 > 0 then
            for i = 0, #v24 - 1 do
                v25 = v25 % #v24 + 1
                local player = v24[v25]
                if player and player.Character then
                    local bodyEffects = player.Character:FindFirstChild("BodyEffects")
                    if not (bodyEffects and bodyEffects:FindFirstChild("SDeath") and bodyEffects.SDeath.Value) then
                        v17 = player
                        shouldSwitch = false
                        break
                    end
                end
            end
        end
        
        if getgenv().enabled1 then
            local ownerPlayer = Players:FindFirstChild(Owner)
            if ownerPlayer then
                local ownerChar = ownerPlayer.Character
                if ownerChar then
                    local bodyEffects = ownerChar:FindFirstChild("BodyEffects")
                    local lastDamager = bodyEffects and bodyEffects:FindFirstChild("LastDamager")
                    local ownerHumanoid = ownerChar:FindFirstChildOfClass("Humanoid")
                    
                    if bodyEffects and lastDamager and ownerHumanoid then
                        local health = ownerHumanoid.Health
                        if getgenv().lastHealths[Owner] == nil then
                            getgenv().lastHealths[Owner] = health
                        end
                        
                        if health + 0.05 < getgenv().lastHealths[Owner] then
                            getgenv().lastHealths[Owner] = health
                            task.wait(0.1)
                            local damager = ownerChar:FindFirstChild("BodyEffects"):FindFirstChild("LastDamager")
                            local damagerName = damager and tostring(damager.Value)
                            if damagerName and damagerName ~= "" then
                                local damagerPlayer = Players:FindFirstChild(damagerName)
                                if damagerPlayer then
                                    v17 = damagerPlayer
                                    v22 = true
                                    v87 = false
                                end
                            end
                        else
                            getgenv().lastHealths[Owner] = health
                        end
                        
                        if v17 and v17.Character then
                            local targetBody = v17.Character:FindFirstChild("BodyEffects")
                            if targetBody and targetBody:FindFirstChild("K.O") and targetBody["K.O"].Value then
                                v17 = nil
                                v22 = false
                                v87 = true
                                reloadTool()
                                UnequipTools()
                            end
                        end
                    end
                end
            end
            
            for protectedName, _ in pairs(getgenv().sentryprotected) do
                local protectedPlayer = Players:FindFirstChild(protectedName)
                if protectedPlayer then
                    local protectedChar = protectedPlayer.Character
                    if protectedChar then
                        local bodyEffects = protectedChar:FindFirstChild("BodyEffects")
                        local lastDamager = bodyEffects and bodyEffects:FindFirstChild("LastDamager")
                        local protectedHumanoid = protectedChar:FindFirstChildOfClass("Humanoid")
                        
                        if bodyEffects and lastDamager and protectedHumanoid then
                            local health = protectedHumanoid.Health
                            if getgenv().lastHealths[protectedName] == nil then
                                getgenv().lastHealths[protectedName] = health
                            end
                            
                            if health + 0.05 < getgenv().lastHealths[protectedName] then
                                getgenv().lastHealths[protectedName] = health
                                task.wait(0.1)
                                local damager = protectedChar:FindFirstChild("BodyEffects"):FindFirstChild("LastDamager")
                                local damagerName = damager and tostring(damager.Value)
                                if damagerName and damagerName ~= "" then
                                    local damagerPlayer = Players:FindFirstChild(damagerName)
                                    if damagerPlayer then
                                        v17 = damagerPlayer
                                        v22 = true
                                        v87 = false
                                    end
                                end
                            else
                                getgenv().lastHealths[protectedName] = health
                            end
                            
                            if v17 and v17.Character then
                                local targetBody = v17.Character:FindFirstChild("BodyEffects")
                                if targetBody and targetBody:FindFirstChild("K.O") and targetBody["K.O"].Value then
                                    v17 = nil
                                    v22 = false
                                    v87 = true
                                    reloadTool()
                                    UnequipTools()
                                end
                            end
                        end
                    else
                        getgenv().lastHealths[protectedName] = nil
                    end
                end
            end
        end
        task.wait()
    end
end)

LocalPlayer.CharacterAdded:Connect(function(newChar)
    char = newChar
    humanoid = char:WaitForChild("Humanoid")
end)

humanoid.Health = 0

for _, seat in ipairs(Workspace:GetDescendants()) do
    if seat:IsA("Seat") then
        seat:Destroy()
    end
end

Workspace.DescendantAdded:Connect(function(descendant)
    task.defer(function()
        if descendant:IsA("Seat") then
            descendant:Destroy()
        end
    end)
end)

if getgenv().HideScreen then
    pcall(function()
        local camera = workspace.CurrentCamera
        camera.CameraType = Enum.CameraType.Scriptable
        camera.CFrame = CFrame.new(99999, 99999, 99999)
        
        LocalPlayer.CharacterAdded:Connect(function()
            task.wait(1)
            camera.CameraType = Enum.CameraType.Scriptable
            camera.CFrame = CFrame.new(99999, 99999, 99999)
        end)
        
        workspace.Terrain:Clear()
        for _, descendant in pairs(workspace:GetDescendants()) do
            if descendant:IsA("Decal") or descendant:IsA("Texture") or descendant:IsA("ParticleEmitter") or descendant:IsA("Light") then
                descendant:Destroy()
            end
            if descendant:IsA("BasePart") then
                descendant.Transparency = 1
                descendant.CastShadow = false
                descendant.Material = Enum.Material.SmoothPlastic
                if descendant:FindFirstChild("SurfaceAppearance") then
                    descendant.SurfaceAppearance:Destroy()
                end
            end
        end
        
        local screenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
        screenGui.Name = "FPS_BLACKOUT"
        screenGui.Parent = game.CoreGui
        screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        
        local blackFrame = Instance.new("Frame", screenGui)
        blackFrame.BackgroundColor3 = Color3.new(0, 0, 0)
        blackFrame.Position = UDim2.new(-0.5, 0, -0.5, 0)
        blackFrame.Size = UDim2.new(2, 0, 2, 0)
        blackFrame.ZIndex = 9999
    end)
end

setfpscap(getgenv().FPSCap)

pcall(function()
    settings().Rendering.QualityLevel = "Level01"
    UserSettings():GetService("UserGameSettings").MasterVolume = 0
end)

pcall(function()
    local lasers = workspace:FindFirstChild("MAP") and workspace.MAP:FindFirstChild("Indestructible") and workspace.MAP.Indestructible:FindFirstChild("Lasers")
    if lasers then
        lasers:Destroy()
    end
end)

pcall(function()
    pcall(function()
        for _, descendant in ipairs(workspace:GetDescendants()) do
            if descendant:IsA("BasePart") then
                descendant.Material = Enum.Material.Plastic
                descendant.Color = Color3.fromRGB(0, 0, 0)
                descendant.Reflectance = 0
                descendant.CastShadow = false
            end
        end
        
        workspace.DescendantAdded:Connect(function(descendant)
            if descendant:IsA("BasePart") then
                descendant.Material = Enum.Material.Plastic
                descendant.Color = Color3.fromRGB(0, 0, 0)
                descendant.Reflectance = 0
                descendant.CastShadow = false
            end
        end)
    end)
    
    pcall(function()
        local virtualUser = game:GetService("VirtualUser")
        game:GetService("Players").LocalPlayer.Idled:Connect(function()
            virtualUser:CaptureController()
            virtualUser:ClickButton2(Vector2.new())
        end)
    end)
end)

if v26 then
    task.delay(5, function()
        refreshingfakeposition = true
        setfflag("S2PhysicsSenderRate", 0)
        setfpscap(4)
        task.wait(0.1)
        setfflag("S2PhysicsSenderRate", 20000)
        setfpscap(240)
        task.wait(3.15)
        refreshingfakeposition = false
    end)
end

return
